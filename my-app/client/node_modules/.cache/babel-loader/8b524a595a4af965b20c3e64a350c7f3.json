{"ast":null,"code":"import Observable from 'zen-observable-ts';\nexport { default as Observable } from 'zen-observable-ts';\nimport { invariant, InvariantError } from 'ts-invariant';\nimport { __extends, __assign } from 'tslib';\nimport { getOperationName } from 'apollo-utilities';\nexport { getOperationName } from 'apollo-utilities';\nfunction validateOperation(operation) {\n  var OPERATION_FIELDS = ['query', 'operationName', 'variables', 'extensions', 'context'];\n  for (var _i = 0, _a = Object.keys(operation); _i < _a.length; _i++) {\n    var key = _a[_i];\n    if (OPERATION_FIELDS.indexOf(key) < 0) {\n      throw process.env.NODE_ENV === \"production\" ? new InvariantError(2) : new InvariantError(\"illegal argument: \" + key);\n    }\n  }\n  return operation;\n}\nvar LinkError = function (_super) {\n  __extends(LinkError, _super);\n  function LinkError(message, link) {\n    var _this = _super.call(this, message) || this;\n    _this.link = link;\n    return _this;\n  }\n  return LinkError;\n}(Error);\nfunction isTerminating(link) {\n  return link.request.length <= 1;\n}\nfunction toPromise(observable) {\n  var completed = false;\n  return new Promise(function (resolve, reject) {\n    observable.subscribe({\n      next: function (data) {\n        if (completed) {\n          process.env.NODE_ENV === \"production\" || invariant.warn(\"Promise Wrapper does not support multiple results from Observable\");\n        } else {\n          completed = true;\n          resolve(data);\n        }\n      },\n      error: reject\n    });\n  });\n}\nvar makePromise = toPromise;\nfunction fromPromise(promise) {\n  return new Observable(function (observer) {\n    promise.then(function (value) {\n      observer.next(value);\n      observer.complete();\n    }).catch(observer.error.bind(observer));\n  });\n}\nfunction fromError(errorValue) {\n  return new Observable(function (observer) {\n    observer.error(errorValue);\n  });\n}\nfunction transformOperation(operation) {\n  var transformedOperation = {\n    variables: operation.variables || {},\n    extensions: operation.extensions || {},\n    operationName: operation.operationName,\n    query: operation.query\n  };\n  if (!transformedOperation.operationName) {\n    transformedOperation.operationName = typeof transformedOperation.query !== 'string' ? getOperationName(transformedOperation.query) : '';\n  }\n  return transformedOperation;\n}\nfunction createOperation(starting, operation) {\n  var context = __assign({}, starting);\n  var setContext = function (next) {\n    if (typeof next === 'function') {\n      context = __assign({}, context, next(context));\n    } else {\n      context = __assign({}, context, next);\n    }\n  };\n  var getContext = function () {\n    return __assign({}, context);\n  };\n  Object.defineProperty(operation, 'setContext', {\n    enumerable: false,\n    value: setContext\n  });\n  Object.defineProperty(operation, 'getContext', {\n    enumerable: false,\n    value: getContext\n  });\n  Object.defineProperty(operation, 'toKey', {\n    enumerable: false,\n    value: function () {\n      return getKey(operation);\n    }\n  });\n  return operation;\n}\nfunction getKey(operation) {\n  var query = operation.query,\n    variables = operation.variables,\n    operationName = operation.operationName;\n  return JSON.stringify([operationName, query, variables]);\n}\nfunction passthrough(op, forward) {\n  return forward ? forward(op) : Observable.of();\n}\nfunction toLink(handler) {\n  return typeof handler === 'function' ? new ApolloLink(handler) : handler;\n}\nfunction empty() {\n  return new ApolloLink(function () {\n    return Observable.of();\n  });\n}\nfunction from(links) {\n  if (links.length === 0) return empty();\n  return links.map(toLink).reduce(function (x, y) {\n    return x.concat(y);\n  });\n}\nfunction split(test, left, right) {\n  var leftLink = toLink(left);\n  var rightLink = toLink(right || new ApolloLink(passthrough));\n  if (isTerminating(leftLink) && isTerminating(rightLink)) {\n    return new ApolloLink(function (operation) {\n      return test(operation) ? leftLink.request(operation) || Observable.of() : rightLink.request(operation) || Observable.of();\n    });\n  } else {\n    return new ApolloLink(function (operation, forward) {\n      return test(operation) ? leftLink.request(operation, forward) || Observable.of() : rightLink.request(operation, forward) || Observable.of();\n    });\n  }\n}\nvar concat = function (first, second) {\n  var firstLink = toLink(first);\n  if (isTerminating(firstLink)) {\n    process.env.NODE_ENV === \"production\" || invariant.warn(new LinkError(\"You are calling concat on a terminating link, which will have no effect\", firstLink));\n    return firstLink;\n  }\n  var nextLink = toLink(second);\n  if (isTerminating(nextLink)) {\n    return new ApolloLink(function (operation) {\n      return firstLink.request(operation, function (op) {\n        return nextLink.request(op) || Observable.of();\n      }) || Observable.of();\n    });\n  } else {\n    return new ApolloLink(function (operation, forward) {\n      return firstLink.request(operation, function (op) {\n        return nextLink.request(op, forward) || Observable.of();\n      }) || Observable.of();\n    });\n  }\n};\nvar ApolloLink = function () {\n  function ApolloLink(request) {\n    if (request) this.request = request;\n  }\n  ApolloLink.prototype.split = function (test, left, right) {\n    return this.concat(split(test, left, right || new ApolloLink(passthrough)));\n  };\n  ApolloLink.prototype.concat = function (next) {\n    return concat(this, next);\n  };\n  ApolloLink.prototype.request = function (operation, forward) {\n    throw process.env.NODE_ENV === \"production\" ? new InvariantError(1) : new InvariantError('request is not implemented');\n  };\n  ApolloLink.empty = empty;\n  ApolloLink.from = from;\n  ApolloLink.split = split;\n  ApolloLink.execute = execute;\n  return ApolloLink;\n}();\nfunction execute(link, operation) {\n  return link.request(createOperation(operation.context, transformOperation(validateOperation(operation)))) || Observable.of();\n}\nexport { ApolloLink, concat, createOperation, empty, execute, from, fromError, fromPromise, makePromise, split, toPromise };","map":{"version":3,"names":["validateOperation","operation","OPERATION_FIELDS","_i","_a","Object","keys","length","key","indexOf","process","env","NODE_ENV","InvariantError","LinkError","_super","__extends","message","link","_this","call","Error","isTerminating","request","toPromise","observable","completed","Promise","resolve","reject","subscribe","next","data","invariant","warn","error","makePromise","fromPromise","promise","Observable","observer","then","value","complete","catch","bind","fromError","errorValue","transformOperation","transformedOperation","variables","extensions","operationName","query","getOperationName","createOperation","starting","context","__assign","setContext","getContext","defineProperty","enumerable","getKey","JSON","stringify","passthrough","op","forward","of","toLink","handler","ApolloLink","empty","from","links","map","reduce","x","y","concat","split","test","left","right","leftLink","rightLink","first","second","firstLink","nextLink","prototype","execute"],"sources":["../src/linkUtils.ts","../src/link.ts"],"sourcesContent":["import Observable from 'zen-observable-ts';\n\nimport { GraphQLRequest, Operation } from './types';\nimport { ApolloLink } from './link';\n\nimport { getOperationName } from 'apollo-utilities';\nimport { invariant, InvariantError } from 'ts-invariant';\nexport { getOperationName };\n\nexport function validateOperation(operation: GraphQLRequest): GraphQLRequest {\n  const OPERATION_FIELDS = [\n    'query',\n    'operationName',\n    'variables',\n    'extensions',\n    'context',\n  ];\n  for (let key of Object.keys(operation)) {\n    if (OPERATION_FIELDS.indexOf(key) < 0) {\n      throw new InvariantError(`illegal argument: ${key}`);\n    }\n  }\n\n  return operation;\n}\n\nexport class LinkError extends Error {\n  public link: ApolloLink;\n  constructor(message?: string, link?: ApolloLink) {\n    super(message);\n    this.link = link;\n  }\n}\n\nexport function isTerminating(link: ApolloLink): boolean {\n  return link.request.length <= 1;\n}\n\nexport function toPromise<R>(observable: Observable<R>): Promise<R> {\n  let completed = false;\n  return new Promise<R>((resolve, reject) => {\n    observable.subscribe({\n      next: data => {\n        if (completed) {\n          invariant.warn(\n            `Promise Wrapper does not support multiple results from Observable`,\n          );\n        } else {\n          completed = true;\n          resolve(data);\n        }\n      },\n      error: reject,\n    });\n  });\n}\n\n// backwards compat\nexport const makePromise = toPromise;\n\nexport function fromPromise<T>(promise: Promise<T>): Observable<T> {\n  return new Observable<T>(observer => {\n    promise\n      .then((value: T) => {\n        observer.next(value);\n        observer.complete();\n      })\n      .catch(observer.error.bind(observer));\n  });\n}\n\nexport function fromError<T>(errorValue: any): Observable<T> {\n  return new Observable<T>(observer => {\n    observer.error(errorValue);\n  });\n}\n\nexport function transformOperation(operation: GraphQLRequest): GraphQLRequest {\n  const transformedOperation: GraphQLRequest = {\n    variables: operation.variables || {},\n    extensions: operation.extensions || {},\n    operationName: operation.operationName,\n    query: operation.query,\n  };\n\n  // best guess at an operation name\n  if (!transformedOperation.operationName) {\n    transformedOperation.operationName =\n      typeof transformedOperation.query !== 'string'\n        ? getOperationName(transformedOperation.query)\n        : '';\n  }\n\n  return transformedOperation as Operation;\n}\n\nexport function createOperation(\n  starting: any,\n  operation: GraphQLRequest,\n): Operation {\n  let context = { ...starting };\n  const setContext = next => {\n    if (typeof next === 'function') {\n      context = { ...context, ...next(context) };\n    } else {\n      context = { ...context, ...next };\n    }\n  };\n  const getContext = () => ({ ...context });\n\n  Object.defineProperty(operation, 'setContext', {\n    enumerable: false,\n    value: setContext,\n  });\n\n  Object.defineProperty(operation, 'getContext', {\n    enumerable: false,\n    value: getContext,\n  });\n\n  Object.defineProperty(operation, 'toKey', {\n    enumerable: false,\n    value: () => getKey(operation),\n  });\n\n  return operation as Operation;\n}\n\nexport function getKey(operation: GraphQLRequest) {\n  // XXX We're assuming here that query and variables will be serialized in\n  // the same order, which might not always be true.\n  const { query, variables, operationName } = operation;\n  return JSON.stringify([operationName, query, variables]);\n}\n","import Observable from 'zen-observable-ts';\nimport { invariant, InvariantError } from 'ts-invariant';\n\nimport {\n  GraphQLRequest,\n  NextLink,\n  Operation,\n  RequestHandler,\n  FetchResult,\n} from './types';\n\nimport {\n  validateOperation,\n  isTerminating,\n  LinkError,\n  transformOperation,\n  createOperation,\n} from './linkUtils';\n\nfunction passthrough(op, forward) {\n  return forward ? forward(op) : Observable.of();\n}\n\nfunction toLink(handler: RequestHandler | ApolloLink) {\n  return typeof handler === 'function' ? new ApolloLink(handler) : handler;\n}\n\nexport function empty(): ApolloLink {\n  return new ApolloLink(() => Observable.of());\n}\n\nexport function from(links: ApolloLink[]): ApolloLink {\n  if (links.length === 0) return empty();\n  return links.map(toLink).reduce((x, y) => x.concat(y));\n}\n\nexport function split(\n  test: (op: Operation) => boolean,\n  left: ApolloLink | RequestHandler,\n  right?: ApolloLink | RequestHandler,\n): ApolloLink {\n  const leftLink = toLink(left);\n  const rightLink = toLink(right || new ApolloLink(passthrough));\n\n  if (isTerminating(leftLink) && isTerminating(rightLink)) {\n    return new ApolloLink(operation => {\n      return test(operation)\n        ? leftLink.request(operation) || Observable.of()\n        : rightLink.request(operation) || Observable.of();\n    });\n  } else {\n    return new ApolloLink((operation, forward) => {\n      return test(operation)\n        ? leftLink.request(operation, forward) || Observable.of()\n        : rightLink.request(operation, forward) || Observable.of();\n    });\n  }\n}\n\n// join two Links together\nexport const concat = (\n  first: ApolloLink | RequestHandler,\n  second: ApolloLink | RequestHandler,\n) => {\n  const firstLink = toLink(first);\n  if (isTerminating(firstLink)) {\n    invariant.warn(\n      new LinkError(\n        `You are calling concat on a terminating link, which will have no effect`,\n        firstLink,\n      ),\n    );\n    return firstLink;\n  }\n  const nextLink = toLink(second);\n\n  if (isTerminating(nextLink)) {\n    return new ApolloLink(\n      operation =>\n        firstLink.request(\n          operation,\n          op => nextLink.request(op) || Observable.of(),\n        ) || Observable.of(),\n    );\n  } else {\n    return new ApolloLink((operation, forward) => {\n      return (\n        firstLink.request(operation, op => {\n          return nextLink.request(op, forward) || Observable.of();\n        }) || Observable.of()\n      );\n    });\n  }\n};\n\nexport class ApolloLink {\n  public static empty = empty;\n  public static from = from;\n  public static split = split;\n  public static execute = execute;\n\n  constructor(request?: RequestHandler) {\n    if (request) this.request = request;\n  }\n\n  public split(\n    test: (op: Operation) => boolean,\n    left: ApolloLink | RequestHandler,\n    right?: ApolloLink | RequestHandler,\n  ): ApolloLink {\n    return this.concat(split(test, left, right || new ApolloLink(passthrough)));\n  }\n\n  public concat(next: ApolloLink | RequestHandler): ApolloLink {\n    return concat(this, next);\n  }\n\n  public request(\n    operation: Operation,\n    forward?: NextLink,\n  ): Observable<FetchResult> | null {\n    throw new InvariantError('request is not implemented');\n  }\n}\n\nexport function execute(\n  link: ApolloLink,\n  operation: GraphQLRequest,\n): Observable<FetchResult> {\n  return (\n    link.request(\n      createOperation(\n        operation.context,\n        transformOperation(validateOperation(operation)),\n      ),\n    ) || Observable.of()\n  );\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}